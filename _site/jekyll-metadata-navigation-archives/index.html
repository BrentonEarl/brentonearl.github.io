<!DOCTYPE HTML>
<html lang="en">
	<head>       
		<meta charset=utf-8>
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
		<title>Exit Status One - Jekyll -  Metadata, Navigation, and Archives</title>
		<meta name="author" content="Brent Earl" />
		
		<meta name="description" content="“Add a dynamically generated HTML Metadata, Navigation Menu, and Archives to Jekyll Site Generator”" />
		
		
		<meta name="keywords" content="jekyll" />
		
		<link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap.min.css">
		<link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap-theme.min.css">
		<link rel="stylesheet" herf="/css/styles.css" type="text/css">
		<!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
		<!--[if lt IE 9]>
		<script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
		<script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
		<![endif]-->
	</head>
	<body>
		<nav class="navbar navbar-inverse navbar-static-top" role="navigation">
			<div class="container">
				<div class="navbar-header">
					<button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
						<span class="sr-only">Toggle navigation</span>
						<span class="icon-bar"></span>
						<span class="icon-bar"></span>
						<span class="icon-bar"></span>
					</button>
					<p class="navbar-brand" href="#">Menu</p>
				</div>
				<div class="navbar-collapse collapse">
					<ul class="nav navbar-nav">
						<li><a href="/" title=" Index">Home</a></li>
						
						
						
						<li><a href="/about.html" title="About the Author">About</a></li>
						
						
						
						<li><a href="/archive.html" title="Site Archives">Archives</a></li>
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						<li><a href="/rss.xml" title="RSS News Feed">News Feed</a></li>
						
						
						
						
					</ul>
				</div>
			</div>
		</nav>
		<header>
			<div class="container">
				<div class="page-header">
					<h1>Exit Status One <br /><small>The only source of knowledge is experience...</small></h1>
				</div>
			</div>
		</header>
	
		<div class="container">
					<div class="row">
				<div class="col-sm-8">
						<article>
						<h4>Jekyll -  Metadata, Navigation, and Archives</h4>
						<p>
						07-21-2013 by <a href="https://twitter.com/BrentonLeeEarl">Brent Earl</a>
						</p>
						<p>
						Category <a href="/categories/jekyll/">jekyll</a>
						</p>
						<p>I have been using Jekyll for about a month.  I continually find ways to improve my code and add more functionality.  I added a few new things to make my job easier and also make the site easier to navigate.  The header of each web site contains what is called "metadata" that tells your web browser and search engines how to interpret it.  I programmed the site to automatically generate metadata so I will not have to add it.  I also added the ability to automatically generate a new links to the navigation menu as new pages are added to the site.  Finally, I added an Archvies page and Category page, because it is important for viewers to find older posts that are no longer listed on the front page.</p>

<p>If you have no idea what Jekyll is, please see: <a href="/new-site-design/">This Post</a></p>

<p>For further reading regarding other site mods I made in the past: <a href="/jekyll-modifications/">Jekyll Modifications</a></p>

<h3>Site Configuration</h3>

<p>The first changes I made were to the site configuration, _config.yml.  I added the description, keyword, user, and url tags.  Previously I was using the title tag, but decided to remove that since that can be inherited from the Front Matter block header in each page.   Here is what my configuration now looks like:</p>

<div class="highlight"><pre><code class="yaml"><span class="l-Scalar-Plain">name</span><span class="p-Indicator">:</span> <span class="s">&quot;Exit</span><span class="nv"> </span><span class="s">Status</span><span class="nv"> </span><span class="s">One&quot;</span>
<span class="l-Scalar-Plain">description</span><span class="p-Indicator">:</span> <span class="s">&quot;Exit</span><span class="nv"> </span><span class="s">Status</span><span class="nv"> </span><span class="s">One</span><span class="nv"> </span><span class="s">is</span><span class="nv"> </span><span class="s">a</span><span class="nv"> </span><span class="s">Blog</span><span class="nv"> </span><span class="s">about</span><span class="nv"> </span><span class="s">Information</span><span class="nv"> </span><span class="s">Security,</span><span class="nv"> </span><span class="s">System</span><span class="nv"> </span><span class="s">Administration,</span> 
<span class="s">Network</span><span class="nv"> </span><span class="s">Administration,</span><span class="nv"> </span><span class="s">Programming,</span><span class="nv"> </span><span class="s">Web</span><span class="nv"> </span><span class="s">Design</span><span class="nv"> </span><span class="s">and</span><span class="nv"> </span><span class="s">Open</span><span class="nv"> </span><span class="s">Source</span><span class="nv"> </span><span class="s">Software.&quot;</span>
<span class="l-Scalar-Plain">keywords</span><span class="p-Indicator">:</span> <span class="s">&quot;Linux,</span><span class="nv"> </span><span class="s">Cisco,</span><span class="nv"> </span><span class="s">Debian,</span><span class="nv"> </span><span class="s">Tech</span><span class="nv"> </span><span class="s">News,</span><span class="nv"> </span><span class="s">Linux</span><span class="nv"> </span><span class="s">Tutorials,</span><span class="nv"> </span><span class="s">Network</span><span class="nv"> </span><span class="s">Administration,</span> 
<span class="s">Linux</span><span class="nv"> </span><span class="s">Networking,</span><span class="nv"> </span><span class="s">Information</span><span class="nv"> </span><span class="s">Technology,</span><span class="nv"> </span><span class="s">Information</span><span class="nv"> </span><span class="s">Security&quot;</span>

<span class="l-Scalar-Plain">user</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">Bob</span>
<span class="l-Scalar-Plain">url</span><span class="p-Indicator">:</span> <span class="s">&quot;http://exitstatusone.com&quot;</span>

<span class="l-Scalar-Plain">paginate</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">5</span>

<span class="l-Scalar-Plain">markdown</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">rdiscount</span>
<span class="l-Scalar-Plain">permalink</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">/:title/</span>
<span class="l-Scalar-Plain">pygments</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">true</span>
<span class="l-Scalar-Plain">changefreq</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">always</span>
</code></pre></div>


<p>The name, description, keywords and user tags are all used to set information in the HTML metadata within the main site layout page.  The url tag is used in the script to generate the Rss Feed and the permalink tag is used to generate the link structure within site.</p>

<h3>HTML Metadata</h3>

<p>The main layout is the only page that has HTML in it.  All other pages are formatted using <a href="http://daringfireball.net/projects/markdown/syntax">Markdown Syntax</a> greatly reducing the time it takes to adjust the site design and write new posts.  With the new structure of the site I needed a way to set the correct meta data in each page without having to modify any code.  What I did was replace each portion of the content in the meta tags with variables used by jekyll to display information, and added a few of my own variables in the process.  The metadata code now reads:</p>

<div class="highlight"><pre><code class="html"><span class="nt">&lt;html&gt;</span>
    <span class="nt">&lt;head&gt;</span>
    <span class="nt">&lt;meta</span> <span class="na">http-equiv=</span><span class="s">&quot;Content-Type&quot;</span> <span class="na">content=</span><span class="s">&quot;text/html;charset=utf-8&quot;</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;title&gt;</span>{{ site.name }} - {{ page.title }}<span class="nt">&lt;/title&gt;</span>
    <span class="nt">&lt;meta</span> <span class="na">name=</span><span class="s">&quot;author&quot;</span> <span class="na">content=</span><span class="s">&quot;{{ site.user }}&quot;</span> <span class="nt">/&gt;</span>
    {% if page.description %}
    <span class="nt">&lt;meta</span> <span class="na">name=</span><span class="s">&quot;description&quot;</span> <span class="na">content=</span><span class="s">&quot;{{page.description }}&quot;</span> <span class="nt">/&gt;</span>
    {% else %}
    <span class="nt">&lt;meta</span> <span class="na">name=</span><span class="s">&quot;description&quot;</span> <span class="na">content=</span><span class="s">&quot;{{site.description }}&quot;</span> <span class="nt">/&gt;</span>
    {% endif %}
    {% if page.categories %}
    <span class="nt">&lt;meta</span> <span class="na">name=</span><span class="s">&quot;keywords&quot;</span> <span class="na">content=</span><span class="s">&quot;{{page.categories | join: &#39;,&#39; }}&quot;</span> <span class="nt">/&gt;</span>
    {% else %}
    <span class="nt">&lt;meta</span> <span class="na">name=</span><span class="s">&quot;keywords&quot;</span> <span class="na">content=</span><span class="s">&quot;{{site.keywords | join: &#39;,&#39; }}&quot;</span> <span class="nt">/&gt;</span>
    {% endif %}
    <span class="nt">&lt;/head&gt;</span>
<span class="nt">&lt;body&gt;</span>
.....
</code></pre></div>


<ol>
<li>Pull the Site name from _config.yml and appened the title listed in the Front Matter header of displayed child page (page.title)</li>
<li>Pull the author name from _config.yml</li>
<li>If the current page set a description in its header display it, otherwise pull down the description from _config.yml</li>
<li>If the current page set a category, use that as the meta keywords for the page, otherwise use the keywords set in _config.yml</li>
</ol>


<p>Now that the metadata code is set from variables, adding the metadata on a new page or post is as simple as:</p>

<div class="highlight"><pre><code class="yaml"><span class="nn">---</span>
<span class="l-Scalar-Plain">title</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">Cool Post</span>
<span class="l-Scalar-Plain">date</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">2013-07-21</span>
<span class="l-Scalar-Plain">description</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">Awesome new post brah...</span>
<span class="l-Scalar-Plain">category</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">Cats</span>
<span class="nn">---</span>

<span class="l-Scalar-Plain">...post content...</span>
</code></pre></div>


<h3>Navigation</h3>

<p>Previously, when a new page was added I would be forced to go back into the main site template and edit some HTML  so that the navigation menu on each page linked to that page.  I am lazy when it comes to things like that and I was worried I would forget to make my edits.</p>

<p>To begin I added a tag to the header of each page in my site directory which I want to be listed in the Naviagtion menu.</p>

<div class="highlight"><pre><code class="yaml"><span class="nn">---</span>
<span class="l-Scalar-Plain">link_title</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">About</span>
<span class="nn">---</span>
</code></pre></div>


<p>I then modified the menu code in the main site layout to reflect the following:</p>

<div class="highlight"><pre><code class="html"><span class="nt">&lt;ul</span> <span class="na">id=</span><span class="s">&quot;menu&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;li&gt;&lt;a</span> <span class="na">href=</span><span class="s">&quot;/&quot;</span> <span class="na">title=</span><span class="s">&quot;{{ site.name }} Index&quot;</span><span class="nt">&gt;</span>Home<span class="nt">&lt;/a&gt;&lt;/li&gt;</span>
    {% assign sorted_pages = site.pages | sort:name %}
    {% for node in sorted_pages %}
      {% if node.link_title %}
       <span class="nt">&lt;li&gt;&lt;a</span> <span class="na">href=</span><span class="s">&quot;{{node.url }}&quot;</span> <span class="na">title=</span><span class="s">&quot;{{ node.title }}&quot;</span><span class="nt">&gt;</span>{{node.link_title }}<span class="nt">&lt;/a&gt;&lt;/li&gt;</span>
      {% endif %}
    {% endfor %}
<span class="nt">&lt;/ul&gt;</span>
</code></pre></div>


<ol>
<li>Default site index link pulls down site.name from _config.yml</li>
<li>Sort through every page in the site and search the header of each page for “link_title”</li>
<li>If link_title exists, print a menu list item with the page url, title and link title.</li>
</ol>


<h3>Archives</h3>

<p>My Archives page is far from complete, but it is worth mentioning.</p>

<div class="highlight"><pre><code class="html"><span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">&quot;archive&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;h3&gt;</span>{{ site.time | date: &#39;%Y&#39; }}<span class="nt">&lt;/h3&gt;</span>
    <span class="nt">&lt;hr</span> <span class="nt">/&gt;</span>
    {%for post in site.posts %}
             {% unless post.next %}
        {% else %}
            {% capture year %}{{ post.date | date: &#39;%Y&#39; }} {% endcapture %}
             {% capture nyear %}{{ post.next.date | date: &#39;%Y&#39; }} {% endcapture %}
            {% if year != nyear %}
                <span class="nt">&lt;h3&gt;</span>{{ post.date | date: &#39;%Y&#39; }}<span class="nt">&lt;/h3&gt;</span>
                <span class="nt">&lt;hr</span> <span class="nt">/&gt;</span>
             {% endif %}
         {% endunless %}
        <span class="nt">&lt;ul&gt;</span>
            <span class="nt">&lt;li&gt;</span>{{ post.date | date:}} <span class="ni">&amp;raquo;</span> <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">&quot;{{ post.url }}&quot;</span> <span class="na">title=</span><span class="s">&quot;{{ post.title }}&quot;</span><span class="nt">&gt;</span>{{ post.title }}<span class="nt">&lt;/a&gt;&lt;/li&gt;</span>
        <span class="nt">&lt;/ul&gt;</span>
     {% endfor %}
<span class="nt">&lt;/div&gt;</span>
</code></pre></div>


<ol>
<li>Pull date from the server, parse out the present year and display</li>
<li>Search through all posts on the site</li>
<li>Find the current year's posts and all posts created in all previous years</li>
<li>List posts by Month and Day, Post URL, and Post Title</li>
</ol>


<p>There are a number of ways I could have generated the list of posts on the site and formatted them to be nice and pretty, but this will do for now.</p>

<hr />

<p>I am pretty sure that everything I used in wordpress is now present on this site.  Time will tell. (O.o)   The only thing I do not have is an image gallery, which I am not all that crazy about, but may add as time progresses.</p>

					</article>
				</div>
				<div class="col-sm-4">
					<div class="list-group">
						<h4 class="list-group-item">Related Posts</h4>
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						<a class="list-group-item" href="/jekyll-related-posts-widget/" title="Jekyll: Related and Recent Posts Widget">Jekyll: Related and Recent Posts Widget</a>
						
						
						
						
						
						
						
						<a class="list-group-item" href="/example-jekyll-site-build/" title="Learn to build your own Jekyll Website">Learn to build your own Jekyll Website</a>
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						<a class="list-group-item" href="/jekyll-modifications/" title="Jekyll: Pagination, Site Map and 404 Redirects">Jekyll: Pagination, Site Map and 404 Redirects</a>
						
						
						
						
						
						
						
						
						
						
						
						<a class="list-group-item" href="/new-site-design/" title="New Site Design">New Site Design</a>
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
					</div>
				</div>
			</div>

<div class="row">
	<div class="col-sm-8">
		<div id="disqus_thread" style="padding:1%;"></div>
		<script type="text/javascript">
		var disqus_shortname = 'exitstatusone';
		(function() {
		var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
		dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
		(document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
		})();
		</script>
		<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
		<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
	</div>
</div>



		</div>
	
		<footer>
			<div class="container">
				<div class="row">
					<div class="col-sm-8">
						<p class="footer">
						Designed by Brent Earl | &copy; 2014 Exit Status One. All Rights Reserved.
						</p>
					</div>
				</div>
			</div>
		</footer>
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
		<script src="//netdna.bootstrapcdn.com/bootstrap/3.1.1/js/bootstrap.min.js"></script>
	</body>
</html>
