<!DOCTYPE HTML>
<!-- Microdata markup added by Google Structured Data Markup Helper. -->
<html lang="en">
	<head>       
		<meta charset=utf-8>
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
		<title>Exit Status One - Jekyll: Pagination, Site Map and 404 Redirects</title>
		<meta name="author" content="Brenton Earl" />
		
		<meta name="description" content="How to list your posts on multiple pages, create a sitemap and create 404 Redirection page in Jekyll." />
		
		
		<meta name="keywords" content="jekyll" />
		
		<link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap.min.css">
		<link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap-theme.min.css">
		<link rel="stylesheet" herf="/css/styles.css" type="text/css">
		<!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
		<!--[if lt IE 9]>
		<script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
		<script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
		<![endif]-->
	</head>
	<body>
		<nav class="navbar navbar-inverse navbar-static-top" role="navigation">
			<div class="container">
				<div class="navbar-header">
					<button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
						<span class="sr-only">Toggle navigation</span>
						<span class="icon-bar"></span>
						<span class="icon-bar"></span>
						<span class="icon-bar"></span>
					</button>
					<p class="navbar-brand" href="#">Menu</p>
				</div>
				<div class="navbar-collapse collapse">
					<ul class="nav navbar-nav">
						<li><a href="/" title=" Index">Home</a></li>
						
						
						
						<li><a href="/about.html" title="About the Author">About</a></li>
						
						
						
						<li><a href="/archive.html" title="Site Archives">Archives</a></li>
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						<li><a href="/rss.xml" title="RSS News Feed">News Feed</a></li>
						
						
						
						
					</ul>
				</div>
			</div>
		</nav>
		<header>
			<div class="container">
				<div class="page-header">
					<h1>Exit Status One</h1>
					<small>while : ; do echo 'Tinker, explore, hack, learn...' ; sleep 28800 ; clear ; done</small>
				</div>
			</div>
		</header>
	
		<div class="container">
					<div class="row">
				<div class="col-sm-8">
					<article itemscope itemtype="http://schema.org/Article">
						<h4 itemprop="name">Jekyll: Pagination, Site Map and 404 Redirects</h4>
						<p>
							<span itemprop="datePublished" content="07-09-2013">							
								07-09-2013
							</span>
							 by 
							<a href="https://plus.google.com/+Exitstatusone" rel="publisher">
								<span itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
									<span itemprop="name">Brenton Earl</span>
								</span>
							</a>
						</p>
						
	<p>This article may be <i><mark>outdated...</mark></i></p>


						<p>
						Category <a href="/categories/jekyll/">jekyll</a>
						</p>
						<span itemprop="articleBody">
							<p>Previously I discussed the new site design and introduced the Jekyll static site generator.  As mentioned, the site was migrated from Wordpress to Jekyll.  Beginning a new Jekyll project generates a basic set of files with a predefined style sheet and site layout.  After modifying the layouts and adding pages, a few features were still missing.  Pagination, Site Maps, and a 404 redirect page were amongst the missing features.  Not difficult to implement, but I feel I should share my experience so that new Jekyll users can find more of the basics in one documented spot.  The <a href="http://jekyllrb.com/">Jekyll</a> web site does document <em>how</em> to use the API, but it does not show in depth guides on how to add certain features.  Searching the web yielded many methods of implementing said features and other features I had not thought to add.</p>

<h4>Pagination</h4>

<p>If you look at the top right just below the menu on the <a href="/">Home</a> page, you will notice a section that shows the pages and what page number you are on.  While on page one, the <em>previous</em> link is not visible, but if you go to a page greater than the first site page, the word <em>previous</em> displays as a link to the first page.  If you click the <em>next</em> button you will notice that the page numbers increment, until the last page when the <em>next</em> link disappears.</p>

<p>Web site designers and Web Application programmers have the ability to create dynamic content that will automatically adjust the Pagination of a web site.  In Jekyll you have to program the site in the same sense, but once the site has been generated, there will be <strong>no</strong> dynamic code anywhere in your web site.  This is great because dynamic content sometimes leads  to web application vulnerabilites or sql injection on the database running that web application.</p>

<p>Anyway here is the code I include on the top and bottom of the default layout page that generates post listings.</p>

<div class="highlight"><pre><code class="html"><span class="nt">&lt;div</span> <span class="na">align=</span><span class="s">&quot;right&quot;</span><span class="nt">&gt;</span>
{% if paginator.previous_page %}
    {% if paginator.page == 2 %}
        <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">&quot;/&quot;</span><span class="nt">&gt;</span>Previous<span class="nt">&lt;/a&gt;</span>
    {% else %}
        <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">&quot;/page{{ paginator.previous_page }}&quot;</span><span class="nt">&gt;</span>Previous<span class="nt">&lt;/a&gt;</span>
    {% endif %}
{% endif %}
<span class="nt">&lt;span&gt;</span>Page: {{ paginator.page }} of {{ paginator.total_pages }}<span class="nt">&lt;/span&gt;</span>
{% if paginator.next_page %}
    <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">&quot;/page{{ paginator.next_page }}&quot;</span><span class="nt">&gt;</span>Next<span class="nt">&lt;/a&gt;</span>
{% endif %}
<span class="nt">&lt;/div&gt;</span>
</code></pre></div>


<p>You will notice how exceedingly simple it is to add functionality to an entire web site with just a few lines of code.</p>

<h4>Site Maps</h4>

<p>Site maps make it possible to index an entire web site more effectively for search engines like google or bing.  If you go to the <a href="http://exitstatusone.com/sitemap.xml">Site map</a> you will see all posts and pages indexed.  This was done using a plug in called "sitemap_generator.rb" located in the plugins directory.  It automatically generates the sitemap.xml.  I found it after a bit of googling.  There are a few other plugins out there that do a similar job, but I had difficulty trying to get them to properly append <em>http://exitstatusone.com</em> to the beginning of each url.  So effectively other plugins I tried indexed the directories of the site without making it possible to find the pages on this site domain.</p>

<p>Here is the plug in github page:  <a href="https://github.com/kinnetica/jekyll-plugins">sitemap_generator.rb</a></p>

<h4>404 Redirect</h4>

<p>After moving to Jekyll the wordpress permalinks were no longer present.  It was important that previously indexed search results in search engines like google would still be directed to the index page of this web site.  With nearly every link changed on the web site, it was imperitive a 404 Redirect page was added so that visitors would still make it to some part of the site.  The solution was quite simple.  This web site runs Apache 2 web server, so it was as simple as adding the 404 page to the sites-available configuration.  Once that was in place, a modification to the meta tags of the default layout page could redirect visitors from the 404 page to the index page.</p>

<p>Here is what I added to the Apache2 virtual host configuration:</p>

<div class="highlight"><pre><code class="bash">ErrorDocument 404 /404.html
</code></pre></div>


<p>After that I added the following to the default layout template:</p>

<div class="highlight"><pre><code class="html">{% if page.url == 404.html  %}
    <span class="nt">&lt;meta</span> <span class="na">http-equiv=</span><span class="s">&quot;refresh&quot;</span> <span class="na">content=</span><span class="s">&quot;10; url=/&quot;</span><span class="nt">&gt;</span>
{% endif %}
</code></pre></div>


<p>Once that was in place, non-existant URLs would be sent to the 404.html page and then the meta tag would refresh the page and send visitors to the index.</p>

<p>I will steadily continue to add more features as time progresses.  I also added an rss feed that is generated by a ruby script embeded within the rss.xml.  A quick google will show how that is done if you are interested.  Thanks for reading!  Please check back for updates.</p>

						</span>
					</article>
				</div>
				<div class="col-sm-4">
				<div class="list-group">
	<h4 class="list-group-item">Related Posts</h4>
	
		
			
		
	
		
			
		
	
		
			
		
	
		
			
		
	
		
			
		
	
		
			
		
	
		
			
		
	
		
			
				
					<a class="list-group-item" href="/jekyll-related-posts-widget/" title="Jekyll: Related and Recent Posts Widget">Jekyll: Related and Recent Posts Widget</a>
				
			
		
	
		
			
				
					<a class="list-group-item" href="/example-jekyll-site-build/" title="Learn to build your own Jekyll Website">Learn to build your own Jekyll Website</a>
				
			
		
	
		
			
		
	
		
			
				
					<a class="list-group-item" href="/jekyll-metadata-navigation-archives/" title="Jekyll -  Metadata, Navigation, and Archives">Jekyll -  Metadata, Navigation, and Archives</a>
				
			
		
	
		
			
		
	
		
			
		
	
		
			
		
	
		
			
		
	
		
			
		
	
		
			
				
			
		
	
		
			
				
					<a class="list-group-item" href="/new-site-design/" title="New Site Design">New Site Design</a>
				
			
		
	
		
			
		
	
		
			
		
	
		
			
		
	
		
			
		
	
		
			
		
	
		
			
		
	
		
			
		
	
		
			
		
	
		
			
		
	
		
			
		
	
		
			
		
	
		
			
		
	
		
			
		
	
		
			
		
	
		
			
		
	
		
			
		
	
		
			
		
	
</div>


				</div>
			</div>
			<br /><br />
<p><strong>If you feel the information here is outdated or incorrect, you can submit a <a href="https://github.com/BrentonEarl/brentonearl.github.io/edit/source/_posts/2013-07-09-jekyll-modifications.markdown">Pull Request on Github!</a></strong></p>

			
<div class="row">
	<div class="col-sm-8">
		<div id="disqus_thread" style="padding:1%;"></div>
		<script type="text/javascript">
		var disqus_shortname = 'exitstatusone';
		(function() {
		var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
		dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
		(document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
		})();
		</script>
		<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
		<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
	</div>
</div>



		</div>
	
		<footer>
			<div class="container">
				<div class="row">
					<div class="col-sm-8">
						<p class="footer">
						&copy; 2014 Brenton Earl. Powered by <a href="http://jekyllrb.com/" title="Jekyllrb">Jekyll</a>.
						</p>
					</div>
				</div>
			</div>
		</footer>
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
		<script src="//netdna.bootstrapcdn.com/bootstrap/3.1.1/js/bootstrap.min.js"></script>
	</body>
</html>
