<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"
    "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<meta name="generator" content="AsciiDoc 8.6.9" />
<meta name="description" content="Exit Status One is a compilation of information about Brenton Earl, his life, his projects, and how to get in contact with him.  Brenton Earl is a free lance  developer working with Linux, Ruby, and Python." />
<meta name="keywords" content="Linux, Ruby, Python, Web Development, Security, Technology" />
<title>Exit Status One</title>
<link rel="stylesheet" href="css/asciidoc.css" type="text/css" />
<link rel="stylesheet" href="css/layout2.css" type="text/css" />
<script type="text/javascript" src="js/asciidoc.js"></script>
<script type="text/javascript">
/*<![CDATA[*/
asciidoc.install();
/*]]>*/
</script>
<script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new
        Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
        ga('create', 'UA-42531432-1', 'auto');
        ga('require', 'linkid', 'linkid.js');
        ga('send', 'pageview');
</script>
</head>
<body>
<div id="layout-menu-box">
<div id="layout-menu">
  <div>&#187;<a href="index.html">Home</a></div>
  <div>&#187;<a href="projects.html">My Projects</a></div>
  <div>&#187;<a href="contact.html">Contact Me</a></div>
  <div>&#187;<a href="about.html">About Me</a></div>
  <div id="page-source">&#187;<a href="Slackware-Grsecurity-How-To.txt">Page&nbsp;Source</a></div>
</div>
</div>
<div id="layout-content-box">
<div id="layout-banner">
  <div id="layout-title">Exit Status One</div>
  <div id="layout-description">Explore, Hack, Learn, Sleep, Rinse and Repeat</div>
</div>
<div id="layout-content">
<div id="header">
</div>
<div id="content">
<div class="sect1">
<h2 id="_slackware_linux_the_grsecurity_patch">Slackware Linux: The Grsecurity Patch</h2>
<div class="sectionbody">
<div class="paragraph"><p>This document is a work in progress.  It is mostly writen for my own record.
However, all corrections and suggestions are much appreciated.</p></div>
<div class="paragraph"><p>The Grsecurity project maintains excellent documentation.  The goal of this
documentation is to fill the gaps between the official grsecurity
documentation and the lack of Slackware documentation regarding the grsecurity
patch.  It will contain links to grsecurity documentation and Slackware
documentation that can help you to fill the gap while patching your kernel and
configuring your system.</p></div>
<div class="paragraph"><p>This documentation applies to Slackware x86_64 14.2 RC1, including all updates
up to Wed Apr  6 05:07:44 UTC 2016.  It assumes you have a full installation
of Slackware Linux.</p></div>
<div class="paragraph"><p>This documentation from the Slackware Documentation Project discusses how to
compile a custom kernel in Slackware:</p></div>
<div class="paragraph"><p><a href="http://docs.slackware.com/slackbook:linux_kernel">http://docs.slackware.com/slackbook:linux_kernel</a></p></div>
<div class="paragraph"><div class="title">Acquiring Kernel Source</div><p>The kernel source should already be installed in /usr/src/.  In this case, it
is in /usr/src/linux (symbolic link) or in /usr/src/linux-4.4.6.  This source
code is ready to use as is with grsecurity.</p></div>
<div class="paragraph"><p>It may be helpful to download the kernel source and kernel modules packages
from your mirror in the event that you require a quick reinstallation.  These
packages can also be found on your Slackware installation medium.</p></div>
<div class="paragraph"><p><a href="http://mirrors.slackware.com/slackware/">http://mirrors.slackware.com/slackware/</a></p></div>
<div class="paragraph"><div class="title">Obtaining the Grsecurity Patch</div><p>There are three things you need to acquire.</p></div>
<div class="olist arabic"><ol class="arabic">
<li>
<p>
The grsecurity kernel patch
</p>
</li>
</ol></div>
<div class="paragraph"><p>Refer to the grsecurity web site for the kernel patch that matches your kernel
source version.  Be aware that using the wrong patch number with an unmatched
kernel source tree is not recommened.  You will have negative results in most
cases.</p></div>
<div class="paragraph"><p>Please also consider verifying your download with the available GPG signature.</p></div>
<div class="paragraph"><p><a href="https://grsecurity.net/download.php">https://grsecurity.net/download.php</a></p></div>
<div class="paragraph"><div class="title">Patching your Kernel</div><p>Assuming that you saved the grsecurity patch to /usr/src, run:</p></div>
<div class="paragraph"><p>cd /usr/src/linux
patch -p1 &lt; ../grsecurity-3.1-4.4.6-201604021734.patch</p></div>
<div class="paragraph"><p>Please note that the file name may differ from your patch file name.</p></div>
<div class="paragraph"><div class="title">Configuring the Kernel Source</div><p>At the time of this writing, Slackware provided a 4.4.6 Linux kernel
configuration.  To configure your kernel, simply copy the provided
configuration file into /usr/src/linux.</p></div>
<div class="paragraph"><p>Then you must run:</p></div>
<div class="paragraph"><p>make menuconfig</p></div>
<div class="paragraph"><p>Some text will flow down your terminal window and then a Curses screen will
apppear.  All of this is documented on the Slackware Documentation Project
page linked earlier.</p></div>
<div class="paragraph"><p>The main goal at this point is to find and enable Grsecurity.  You will find
documentation discussing this topic futher here:</p></div>
<div class="paragraph"><p><a href="https://en.wikibooks.org/wiki/Grsecurity/Configuring_and_Installing_grsecurity#Configuring_the_Kernel">https://en.wikibooks.org/wiki/Grsecurity/Configuring_and_Installing_grsecurity#Configuring_the_Kernel</a></p></div>
<div class="paragraph"><div class="title">Build and Install your Patched  Kernel</div><p>In order to compile your kernel you must run the following:</p></div>
<div class="paragraph"><p>cd /usr/src/linux
make bzImage &amp;&amp; make modules</p></div>
<div class="paragraph"><p>This is outlined and explained more thoroughly in the following link towards
the bottom of the page:</p></div>
<div class="paragraph"><p><a href="http://docs.slackware.com/slackbook:linux_kernel#compiling_a_kernel_and_why_to_do_so">http://docs.slackware.com/slackbook:linux_kernel#compiling_a_kernel_and_why_to_do_so</a></p></div>
<div class="paragraph"><p>Reboot your computer once you are finished making the necessary changes.  Key
points to remember:</p></div>
<div class="olist arabic"><ol class="arabic">
<li>
<p>
If you require it, build a initrd.
</p>
</li>
<li>
<p>
Update your Lilo confugration file, and as root run
</p>
</li>
</ol></div>
<div class="paragraph"><p>lilo -v</p></div>
<div class="paragraph"><div class="title">Obtaining the Grsecurity Administrative Utilities</div><p>There are a few things to do once you are booted into your newly created
grsecurity kernel.  There will be some configurations to do so that your
system is free of hiccups.  First though you need to download the following
software:</p></div>
<div class="olist arabic"><ol class="arabic">
<li>
<p>
The administrative tool, "gradm"
</p>
</li>
<li>
<p>
The Pax user-space utility, "paxctl"
</p>
</li>
</ol></div>
<div class="paragraph"><p>Both of these can be found on the <a href="https://slackbuilds.org">https://slackbuilds.org</a> web site.  If you
have sbopkg installed:</p></div>
<div class="paragraph"><p>sbopkg -i "gradm paxctl"</p></div>
<div class="paragraph"><p>Please install gradm and paxctl only after you have booted into your new
grsecurity patched kernel.  If you are uncertain that you are running the
correct kernel, just run as root:</p></div>
<div class="paragraph"><p>uname -a</p></div>
<div class="paragraph"><p>TO BE CONTINUED!</p></div>
</div>
</div>
</div>
<div id="footnotes"><hr /></div>
<div id="footer">
<div id="footer-text">
Version 2.0<br />
Last updated 2016-04-08 20:06:04 MDT
</div>
<div id="footer-badges">
<a href="http://validator.w3.org/check?uri=referer">
  <img style="border:0;width:88px;height:31px"
    src="http://www.w3.org/Icons/valid-xhtml11-blue"
    alt="Valid XHTML 1.1" height="31" width="88" />
</a>
<a href="http://jigsaw.w3.org/css-validator/">
  <img style="border:0;width:88px;height:31px"
    src="http://jigsaw.w3.org/css-validator/images/vcss-blue"
    alt="Valid CSS!" />
</a>
</div>
</div>
</div>
</div>
</body>
</html>
